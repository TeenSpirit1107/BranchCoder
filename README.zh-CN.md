# AI Chat Sidebar - VS Code Extension

[English](README.md) | [ä¸­æ–‡](README.zh-CN.md)

---

ä¸€ä¸ªå¼ºå¤§çš„ VS Code æ‰©å±•ï¼Œåœ¨ä¾§è¾¹æ æä¾› AI å¯¹è¯åŠŸèƒ½ã€‚AI åŠŸèƒ½é€šè¿‡ Python è„šæœ¬å®ç°ï¼Œæ”¯æŒ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯ã€å·¥å…·è°ƒç”¨ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç´¢å¼•ä»£ç åº“å¹¶ä¸º AI æä¾›ä¸Šä¸‹æ–‡ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹ä»£ç æ–‡ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ“± **ä¾§è¾¹æ èŠå¤©ç•Œé¢** - ç®€æ´ç¾è§‚çš„å¯¹è¯ç•Œé¢
- ğŸ’¬ **ä¸ AI è¿›è¡Œå¯¹è¯** - æ”¯æŒå¤šè½®å¯¹è¯å’Œå†å²è®°å½•
- ğŸ” **RAG ä»£ç ç´¢å¼•** - è‡ªåŠ¨ç´¢å¼•å·¥ä½œåŒºä»£ç ï¼Œä¸º AI æä¾›ä»£ç ä¸Šä¸‹æ–‡
- ğŸ”„ **è‡ªåŠ¨æ›´æ–°ç´¢å¼•** - é€šè¿‡å¿«ç…§ç³»ç»Ÿæ£€æµ‹æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–° RAG ç´¢å¼•
- ğŸ“ **Markdown æ¸²æŸ“** - æ”¯æŒ Markdown æ ¼å¼çš„æ¶ˆæ¯æ¸²æŸ“
- ğŸ§¹ **æ¸…é™¤èŠå¤©å†å²** - ä¸€é”®æ¸…ç©ºå¯¹è¯è®°å½•
- âš™ï¸ **å¯é…ç½®çš„ Python è·¯å¾„å’Œè„šæœ¬è·¯å¾„**
- ğŸ“Š **è¾“å‡ºæ—¥å¿—** - è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§

### æ™ºèƒ½å·¥å…·ç³»ç»Ÿ

AI å¯ä»¥è°ƒç”¨å¤šç§å·¥å…·æ¥å®Œæˆå¤æ‚ä»»åŠ¡ï¼š

- ğŸ”§ **ä»£ç è¡¥ä¸åº”ç”¨** (`apply_patch`) - AI å¯ä»¥ç”Ÿæˆå¹¶åº”ç”¨ä»£ç è¡¥ä¸
- ğŸ’» **å‘½ä»¤æ‰§è¡Œ** (`command`) - æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚ gitã€npm ç­‰ï¼‰
- ğŸŒ **ç½‘é¡µè·å–** (`fetch_url`) - è·å–ç½‘é¡µå†…å®¹
- ğŸ” **ä»£ç æ£€æŸ¥** (`lint`) - å¯¹ä»£ç è¿›è¡Œè¯­æ³•æ£€æŸ¥
- ğŸŒ **ç½‘ç»œæœç´¢** (`web_search`) - æœç´¢ç½‘ç»œä¿¡æ¯
- ğŸ“š **å·¥ä½œåŒº RAG** (`workspace_rag`) - ä½¿ç”¨ RAG æ£€ç´¢ä»£ç ä¸Šä¸‹æ–‡
- ğŸ“ **å·¥ä½œåŒºç»“æ„** (`workspace_structure`) - è·å–å·¥ä½œåŒºæ–‡ä»¶ç»“æ„
- ğŸ“¤ **å‘é€æŠ¥å‘Š** (`send_report`) - å‘é€æœ€ç»ˆæŠ¥å‘Šç»™ç”¨æˆ·

### ä»£ç ä¿®æ”¹åŠŸèƒ½

- ğŸ”€ **Patch é¢„è§ˆ** - AI ç”Ÿæˆä»£ç è¡¥ä¸åï¼Œè‡ªåŠ¨åœ¨ VS Code ä¸­æ˜¾ç¤ºå·®å¼‚é¢„è§ˆ
- âœ… **Accept/Reject æŒ‰é’®** - åœ¨èŠå¤©é¢æ¿ä¸­æä¾›æŒ‰é’®ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦æ¥å—æ›´æ”¹
- ğŸ”„ **è‡ªåŠ¨åº”ç”¨é¢„è§ˆ** - Patch ç”Ÿæˆåè‡ªåŠ¨åº”ç”¨åˆ°ä»£ç ï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰
- â†©ï¸ **æ’¤å›æ›´æ”¹** - å¦‚æœæ‹’ç»ï¼Œå¯ä»¥æ’¤å›å·²åº”ç”¨çš„æ›´æ”¹

### Flow Agent ç³»ç»Ÿ

- ğŸ¤– **æ™ºèƒ½ä»£ç†** - ä½¿ç”¨ Flow Agent è¿›è¡Œå¤šè½®è¿­ä»£çš„å·¥å…·è°ƒç”¨
- ğŸ”„ **è‡ªåŠ¨è¿­ä»£** - æœ€å¤šæ”¯æŒ 10 è½®è¿­ä»£ï¼Œè‡ªåŠ¨å®Œæˆå¤æ‚ä»»åŠ¡
- ğŸ’¾ **è®°å¿†ç³»ç»Ÿ** - ä¿å­˜å·¥å…·è°ƒç”¨å†å²ï¼Œä¸ºåç»­å†³ç­–æä¾›ä¸Šä¸‹æ–‡

## å®‰è£…

### å‰ç½®è¦æ±‚

- Node.js å’Œ npm
- Python 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- [uv](https://github.com/astral-sh/uv)ï¼ˆæ¨èçš„ Python åŒ…ç®¡ç†å™¨ï¼‰

### å®‰è£…æ­¥éª¤

1. å®‰è£… Node.js ä¾èµ–ï¼š
```bash
npm install
```

2. è®¾ç½® Python ç¯å¢ƒï¼ˆä½¿ç”¨ uvï¼‰ï¼š

```bash
# å®‰è£… uvï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰
# macOS/Linux:
curl -LsSf https://astral.sh/uv/install.sh | sh
# æˆ–ä½¿ç”¨ pip:
# pip install uv

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source .venv/bin/activate
# Windows:
# .venv\Scripts\activate

# å®‰è£… Python ä¾èµ–
uv sync
```

3. é…ç½® VS Code æ‰©å±•ï¼š

åœ¨ VS Code è®¾ç½®ä¸­ï¼Œå°† `aiChat.pythonPath` è®¾ç½®ä¸º uv è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨è·¯å¾„ï¼š

- macOS/Linux: `.venv/bin/python`ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
- Windows: `.venv\Scripts\python.exe`ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰

æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚

4. ç¼–è¯‘ TypeScriptï¼š
```bash
npm run compile
```

5. æŒ‰ `F5` åœ¨æ‰©å±•å¼€å‘ä¸»æœºä¸­è¿è¡Œ

## é…ç½®

åœ¨ VS Code è®¾ç½®ä¸­é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š

- `aiChat.pythonPath`: Python è§£é‡Šå™¨è·¯å¾„
  - é»˜è®¤: `python3`
  - ä½¿ç”¨ uv ç¯å¢ƒæ—¶: `.venv/bin/python`ï¼ˆLinux/macOSï¼‰æˆ– `.venv\Scripts\python.exe`ï¼ˆWindowsï¼‰
  - å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„
- `aiChat.aiScriptPath`: AI æœåŠ¡è„šæœ¬è·¯å¾„ï¼ˆé»˜è®¤: `python/ai_service.py`ï¼‰

### Python ç¯å¢ƒå˜é‡

ç¡®ä¿åœ¨ `python/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```bash
# OpenAI é…ç½®
OPENAI_API_KEY=your_api_key_here
OPENAI_MODEL=your_model_name  # ä¾‹å¦‚: gpt-4, gpt-3.5-turbo ç­‰
OPENAI_BASE_URL=your_base_url  # å¯é€‰ï¼Œç”¨äºè‡ªå®šä¹‰ API ç«¯ç‚¹
OPENAI_PROXY=your_proxy_url  # å¯é€‰ï¼Œä»£ç†é…ç½®

# RAG é…ç½®
RAG_ENABLED=true  # æ˜¯å¦å¯ç”¨ RAG ç´¢å¼•æ„å»ºå’Œæ›´æ–°ï¼Œé»˜è®¤: trueã€‚è®¾ç½®ä¸º false å¯ç¦ç”¨ RAG åŠŸèƒ½
RAG_UPDATE_INTERVAL_SECONDS=60  # RAG æ›´æ–°æœåŠ¡çš„æœ€å°æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤: 60
RAG_DESCRIPTION_CONCURRENCY=2  # æè¿°ç”Ÿæˆçš„å¹¶å‘æ•°ï¼Œé»˜è®¤: 2
RAG_INDEXING_CONCURRENCY=2  # ç´¢å¼•æ„å»ºçš„å¹¶å‘æ•°ï¼Œé»˜è®¤: 2
```

> **æ³¨æ„**ï¼š`.env` æ–‡ä»¶åº”æ”¾åœ¨ `python/` ç›®å½•ä¸‹ï¼Œè€Œä¸æ˜¯é¡¹ç›®æ ¹ç›®å½•ã€‚

## ä½¿ç”¨æ–¹æ³•

### ä½¿ç”¨ "Run and Debug" è¿è¡Œ Agent

ä½¿ç”¨ `Run and Debug` æ¨¡å¼è¿è¡Œä»£ç ï¼š

![run and debug](doc/readme/run_and_debug.png)

### è®¿é—®èŠå¤©ç•Œé¢

1. **é€šè¿‡æ´»åŠ¨æ å›¾æ ‡**ï¼ˆæ¨èï¼‰ï¼š
   - åœ¨ VS Code å·¦ä¾§æ´»åŠ¨æ æ‰¾åˆ° ğŸ’¬ èŠå¤©å›¾æ ‡
   - ç‚¹å‡»å›¾æ ‡æ‰“å¼€ "AI Chat" è§†å›¾ï¼ˆè§ä¸‹å›¾ï¼‰

    ![AI Chat](doc/readme/ai_chat.png)

2. **é€šè¿‡å‘½ä»¤é¢æ¿**ï¼š
   - æŒ‰ `Ctrl+Shift+P` (Windows/Linux) æˆ– `Cmd+Shift+P` (Mac)
   - è¾“å…¥ `AI Chat: Open AI Chat` å¹¶é€‰æ‹©

### å¼€å§‹å¯¹è¯

1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯
2. æŒ‰ `Enter` æˆ–ç‚¹å‡» "Send" å‘é€æ¶ˆæ¯
3. AI å°†å¤„ç†æ¶ˆæ¯å¹¶è¿”å›å“åº”ï¼ˆæ”¯æŒ Markdown æ ¼å¼ï¼‰

### ä»£ç ä¿®æ”¹å·¥ä½œæµ

å½“ AI ç”Ÿæˆä»£ç è¡¥ä¸æ—¶ï¼š

1. **è‡ªåŠ¨é¢„è§ˆ**ï¼šPatch ä¼šè‡ªåŠ¨åº”ç”¨åˆ°ä»£ç ä¸­ï¼Œå¹¶åœ¨ VS Code ä¸­æ˜¾ç¤ºå·®å¼‚é¢„è§ˆçª—å£
2. **æŸ¥çœ‹æ›´æ”¹**ï¼šåœ¨é¢„è§ˆçª—å£ä¸­æŸ¥çœ‹ä¿®æ”¹å‰åçš„å·®å¼‚
3. **åšå‡ºå†³å®š**ï¼š
   - ç‚¹å‡» **Accept** æŒ‰é’®ï¼šä¿ç•™æ›´æ”¹ï¼Œè¡¥ä¸æ­£å¼åº”ç”¨
   - ç‚¹å‡» **Reject** æŒ‰é’®ï¼šæ’¤å›æ›´æ”¹ï¼Œä»£ç æ¢å¤åˆ°ä¿®æ”¹å‰çš„çŠ¶æ€
4. **æŒ‰é’®ä½ç½®**ï¼šAccept/Reject æŒ‰é’®æ˜¾ç¤ºåœ¨èŠå¤©é¢æ¿çš„è¾“å…¥æ¡†ä¸Šæ–¹

> **æ³¨æ„**ï¼šå¦‚æœç”¨æˆ·ä¸ç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰é’®ä¼šä¸€ç›´æ˜¾ç¤ºï¼Œç›´åˆ°ç”¨æˆ·åšå‡ºé€‰æ‹©æˆ–æ–°çš„ patch ç”Ÿæˆã€‚

### RAG ç´¢å¼•

- **é¦–æ¬¡æ‰“å¼€å·¥ä½œåŒº**ï¼šæ‰©å±•ä¼šè‡ªåŠ¨åˆå§‹åŒ– RAG ç´¢å¼•ï¼Œç´¢å¼•æ•´ä¸ªä»£ç åº“
- **è‡ªåŠ¨æ›´æ–°**ï¼šæ‰©å±•ä¼šå®šæœŸæ£€æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–°ç´¢å¼•ï¼ˆé—´éš”ç”± `RAG_UPDATE_INTERVAL_SECONDS` é…ç½®ï¼‰
- **å…³é—­æ£€æµ‹**ï¼šå³ä½¿ VS Code å…³é—­æ—¶æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ‰“å¼€æ—¶ä¹Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æ›´æ–°
- **æŸ¥çœ‹æ—¥å¿—**ï¼šåœ¨ VS Code çš„"è¾“å‡º"é¢æ¿ä¸­ï¼Œé€‰æ‹© "AI Service" é¢‘é“æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

## å·¥ä½œåŸç†

### AI æœåŠ¡æ¶æ„

æ‰©å±•ä½¿ç”¨ Python è„šæœ¬å¤„ç† AI è¯·æ±‚ï¼Œä¸»è¦ç»„ä»¶åŒ…æ‹¬ï¼š

1. **å‰ç«¯** (`src/extension.ts`, `src/ChatPanel.ts`)
   - VS Code æ‰©å±•ä¸»ç¨‹åº
   - ç®¡ç† Webview èŠå¤©ç•Œé¢
   - å¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ¶ˆæ¯æ˜¾ç¤º
   - å¤„ç† Patch é¢„è§ˆå’Œåº”ç”¨

2. **AI æœåŠ¡** (`python/ai_service.py`)
   - æ¥æ”¶èŠå¤©æ¶ˆæ¯å’Œå†å²è®°å½•
   - è°ƒç”¨ Flow Agent å¤„ç†è¯·æ±‚
   - è¿”å›æ ¼å¼åŒ–çš„ AI å›å¤

3. **Flow Agent** (`python/agents/flow.py`)
   - æ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šè½®è¿­ä»£
   - è‡ªåŠ¨è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡
   - ç®¡ç†å·¥å…·è°ƒç”¨å†å²å’Œä¸Šä¸‹æ–‡

4. **å·¥å…·ç³»ç»Ÿ** (`python/tools/`)
   - å¯æ‰©å±•çš„å·¥å…·æ¡†æ¶
   - æ”¯æŒå¤šç§å·¥å…·ï¼ˆè¡¥ä¸åº”ç”¨ã€å‘½ä»¤æ‰§è¡Œã€ä»£ç æ£€æŸ¥ç­‰ï¼‰
   - è‡ªåŠ¨å·¥å…·å‘ç°å’Œæ³¨å†Œ

5. **LLM å®¢æˆ·ç«¯** (`python/llm/`)
   - å°è£… OpenAI API è°ƒç”¨
   - æ”¯æŒå¼‚æ­¥å¤„ç†
   - ç®¡ç† API é…ç½®å’Œé”™è¯¯å¤„ç†

6. **RAG æœåŠ¡** (`python/rag/`)
   - ä»£ç åº“ç´¢å¼•å’Œæ£€ç´¢
   - è‡ªåŠ¨ç”Ÿæˆä»£ç æè¿°
   - å¢é‡æ›´æ–°ç´¢å¼•

### äº‹ä»¶æµç³»ç»Ÿ

æ‰©å±•ä½¿ç”¨äº‹ä»¶æµç³»ç»Ÿæ¥ä¼ é€’ä¿¡æ¯ï¼š

- **ToolCallEvent**: å·¥å…·è°ƒç”¨äº‹ä»¶
- **ToolResultEvent**: å·¥å…·æ‰§è¡Œç»“æœäº‹ä»¶
- **ReportEvent**: æœ€ç»ˆæŠ¥å‘Šäº‹ä»¶ï¼ˆé€šè¿‡ `send_report` å·¥å…·ï¼‰
- **MessageEvent**: æ™®é€šæ¶ˆæ¯äº‹ä»¶

æ‰€æœ‰äº‹ä»¶éƒ½ä¼šåœ¨èŠå¤©ç•Œé¢ä¸­æ˜¾ç¤ºï¼Œä¿ç•™å®Œæ•´çš„å¯¹è¯å†å²ã€‚

### RAG ç´¢å¼•æµç¨‹

1. **åˆå§‹åŒ–**ï¼šé¦–æ¬¡æ‰“å¼€å·¥ä½œåŒºæ—¶ï¼Œæ‰«ææ‰€æœ‰ä»£ç æ–‡ä»¶å¹¶åˆ›å»ºç´¢å¼•
2. **å¿«ç…§ç³»ç»Ÿ**ï¼šä½¿ç”¨æ–‡ä»¶å“ˆå¸Œå¿«ç…§æ£€æµ‹å˜åŒ–
3. **å¢é‡æ›´æ–°**ï¼šä»…æ›´æ–°å˜æ›´çš„æ–‡ä»¶ï¼Œæé«˜æ•ˆç‡
4. **ä¸Šä¸‹æ–‡æ£€ç´¢**ï¼šAI å›ç­”é—®é¢˜æ—¶ï¼ŒRAG ç³»ç»Ÿä¼šæ£€ç´¢ç›¸å…³ä»£ç ä¸Šä¸‹æ–‡

### Patch åº”ç”¨æµç¨‹

1. **ç”Ÿæˆè¡¥ä¸**ï¼šAI é€šè¿‡ `apply_patch` å·¥å…·ç”Ÿæˆä»£ç è¡¥ä¸
2. **è‡ªåŠ¨åº”ç”¨**ï¼šè¡¥ä¸è‡ªåŠ¨åº”ç”¨åˆ°ä»£ç æ–‡ä»¶ï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰
3. **æ˜¾ç¤ºé¢„è§ˆ**ï¼šåœ¨ VS Code ä¸­æ‰“å¼€å·®å¼‚é¢„è§ˆçª—å£
4. **ç”¨æˆ·é€‰æ‹©**ï¼šç”¨æˆ·é€šè¿‡ Accept/Reject æŒ‰é’®å†³å®šæ˜¯å¦ä¿ç•™æ›´æ”¹
5. **æ‰§è¡Œæ“ä½œ**ï¼š
   - Accept: ä¿ç•™æ›´æ”¹ï¼ˆè¡¥ä¸å·²åº”ç”¨ï¼Œæ— éœ€é¢å¤–æ“ä½œï¼‰
   - Reject: æ’¤å›æ›´æ”¹ï¼ˆæ¢å¤åˆ°ä¿®æ”¹å‰çš„çŠ¶æ€ï¼‰

## è‡ªå®šä¹‰ AI åŠŸèƒ½

### ä¿®æ”¹ AI æœåŠ¡

ç¼–è¾‘ `python/ai_service.py` æ–‡ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ AI å“åº”é€»è¾‘ã€‚

### ä¿®æ”¹ Flow Agent

ç¼–è¾‘ `python/agents/flow.py` (ReAct Flow)æˆ–è€…åŒç›®å½•`planact_flow.py` (PlanAct Flow) ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥ï¼š
- è°ƒæ•´æœ€å¤§è¿­ä»£æ¬¡æ•°
- ä¿®æ”¹å·¥å…·è°ƒç”¨é€»è¾‘
- è‡ªå®šä¹‰æç¤ºè¯

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `python/tools/` ç›®å½•ä¸‹åˆ›å»ºæ–°å·¥å…·æ–‡ä»¶
2. ç»§æ‰¿ `MCPTool` åŸºç±»
3. å®ç°å¿…è¦çš„å±æ€§å’Œæ–¹æ³•
4. å·¥å…·ä¼šè‡ªåŠ¨è¢«å‘ç°å’Œæ³¨å†Œ

ç¤ºä¾‹å·¥å…·ç»“æ„ï¼š
```python
from tools.base_tool import MCPTool

class MyCustomTool(MCPTool):
    @property
    def name(self) -> str:
        return "my_tool"
    
    @property
    def agent_tool(self) -> bool:
        return True  # æ˜¯å¦æš´éœ²ç»™ AI
    
    def get_tool_definition(self) -> Dict[str, Any]:
        # è¿”å›å·¥å…·å®šä¹‰
        pass
    
    async def execute(self, ...) -> Dict[str, Any]:
        # æ‰§è¡Œå·¥å…·é€»è¾‘
        pass
```

### ä¿®æ”¹ LLM é…ç½®

ç¼–è¾‘ `python/llm/chat_llm.py` æ–‡ä»¶ï¼Œå¯ä»¥ï¼š
- æ›´æ¢ä¸åŒçš„ LLM æä¾›å•†
- è°ƒæ•´æ¨¡å‹å‚æ•°
- æ·»åŠ è‡ªå®šä¹‰æç¤ºè¯

### è°ƒæ•´ RAG è¡Œä¸º

ç¼–è¾‘ `python/rag/` ç›®å½•ä¸‹çš„ç›¸å…³æ–‡ä»¶ï¼Œå¯ä»¥ï¼š
- ä¿®æ”¹ä»£ç åˆ‡ç‰‡ç­–ç•¥
- è°ƒæ•´æè¿°ç”Ÿæˆæ–¹å¼
- è‡ªå®šä¹‰æ£€ç´¢ç®—æ³•

## å¼€å‘

### TypeScript ç¼–è¯‘

```bash
# ç¼–è¯‘
npm run compile

# ç›‘å¬æ¨¡å¼ç¼–è¯‘ï¼ˆè‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼‰
npm run watch
```

### Python å¼€å‘

é¡¹ç›®ä½¿ç”¨ `uv` ä½œä¸º Python åŒ…ç®¡ç†å™¨ï¼š

```bash
# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
uv sync

# å®‰è£…ä¾èµ–ï¼ˆdevç‰ˆæœ¬ï¼Œè¿è¡Œæµ‹è¯•éœ€è¦ï¼‰
uv sync --extra dev

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate  # Windows
```

### è¿è¡Œæµ‹è¯•

è¿è¡Œæµ‹è¯•éœ€è¦å®‰è£…devç‰ˆæœ¬çš„ä¾èµ–ï¼ˆè§ä¸Šæ–‡ï¼‰ã€‚

```bash
# è¿è¡Œ Python å·¥å…·æµ‹è¯•
cd python
python -m pytest tests/ -v

# æˆ–è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
python tests/test_apply_patch_tool.py
```

### è°ƒè¯•

1. åœ¨ VS Code æˆ–è€…Cursorç­‰VS Codeæ¶æ„çš„ä»£ç ç¼–è¾‘å™¨ä¸­ï¼ŒæŒ‰`Run and Debug`é”®å¯åŠ¨æ‰©å±•å¼€å‘ä¸»æœºï¼ˆè§ä¸‹å›¾ï¼‰
2. åœ¨å¼€å‘ä¸»æœºä¸­æµ‹è¯•æ‰©å±•åŠŸèƒ½
3. æŸ¥çœ‹è°ƒè¯•æ§åˆ¶å°å’Œè¾“å‡ºé¢æ¿ï¼ˆ"AI Service" é¢‘é“ï¼‰è·å–æ—¥å¿—

![run and debug](doc/readme/run_and_debug.png)

### é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/                    # TypeScript æºä»£ç 
â”‚   â”œâ”€â”€ extension.ts        # æ‰©å±•ä¸»å…¥å£
â”‚   â”œâ”€â”€ ChatPanel.ts        # èŠå¤©é¢æ¿é€»è¾‘
â”‚   â”œâ”€â”€ patchPreview.ts     # Patch é¢„è§ˆæä¾›è€…
â”‚   â”œâ”€â”€ patchUtils.ts        # Patch å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ snapshot.ts         # å¿«ç…§ç³»ç»Ÿ
â”œâ”€â”€ python/                  # Python æœåŠ¡
â”‚   â”œâ”€â”€ ai_service.py       # AI æœåŠ¡ä¸»è„šæœ¬
â”‚   â”œâ”€â”€ agents/              # Agent ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ flow.py         # ReAct Flow Agent
â”‚   â”‚   â”œâ”€â”€ memory.py       # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ planact_flow.py # PlanAct Flow Agent
â”‚   â”œâ”€â”€ tools/               # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ base_tool.py    # å·¥å…·åŸºç±»
â”‚   â”‚   â”œâ”€â”€ tool_factory.py # å·¥å…·å·¥å‚
â”‚   â”‚   â”œâ”€â”€ apply_patch_tool.py
â”‚   â”‚   â”œâ”€â”€ command_tool.py
â”‚   â”‚   â”œâ”€â”€ fetch_url_tool.py
â”‚   â”‚   â”œâ”€â”€ lint_tool.py
â”‚   â”‚   â”œâ”€â”€ message_tool.py
â”‚   â”‚   â”œâ”€â”€ parallel_task_executor.py
â”‚   â”‚   â”œâ”€â”€ search_replace_tool.py
â”‚   â”‚   â”œâ”€â”€ send_report_tool.py
â”‚   â”‚   â”œâ”€â”€ web_search_tool.py
â”‚   â”‚   â”œâ”€â”€ workspace_rag_tool.py
â”‚   â”‚   â””â”€â”€ workspace_structure_tool.py
â”‚   â”œâ”€â”€ llm/                 # LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ chat_llm.py
â”‚   â”‚   â””â”€â”€ rag_llm.py
â”‚   â”œâ”€â”€ rag/                 # RAG ç´¢å¼•æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ class_slicer.py
â”‚   â”‚   â”œâ”€â”€ description_generator.py
â”‚   â”‚   â”œâ”€â”€ function_slicer.py
â”‚   â”‚   â”œâ”€â”€ hash.py
â”‚   â”‚   â”œâ”€â”€ incremental_updater.py
â”‚   â”‚   â”œâ”€â”€ indexing.py
â”‚   â”‚   â””â”€â”€ rag_service.py
â”‚   â”œâ”€â”€ rag_init_service.py  # RAG åˆå§‹åŒ–æœåŠ¡
â”‚   â”œâ”€â”€ rag_update_service.py # RAG æ›´æ–°æœåŠ¡
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ prompts/             # æç¤ºè¯
â”‚   â”‚   â””â”€â”€ flow_prompt.py
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ logger.py
â”‚   â”‚   â””â”€â”€ patch_parser.py
â”‚   â””â”€â”€ tests/               # æµ‹è¯•
â”œâ”€â”€ media/                   # é™æ€èµ„æºï¼ˆCSS ç­‰ï¼‰
â”‚   â””â”€â”€ chat.css            # èŠå¤©ç•Œé¢æ ·å¼
â”œâ”€â”€ out/                     # TypeScript ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ doc/                     # æ–‡æ¡£
â”œâ”€â”€ logs/                    # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ sample_ws/               # ç¤ºä¾‹å·¥ä½œåŒº
â”œâ”€â”€ package.json            # Node.js é…ç½®
â”œâ”€â”€ pyproject.toml          # Python é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â””â”€â”€ uv.lock                 # uv é”å®šæ–‡ä»¶
```

## è®¸å¯è¯

MIT

